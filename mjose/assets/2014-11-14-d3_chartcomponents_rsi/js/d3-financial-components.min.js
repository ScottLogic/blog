/*! d3-financial-components 18-11-2014 */

sl={version:"0.0.0",indicators:{},scale:{},series:{},tools:{},utilities:{}},function(a,b){function c(a){if(a in f)return f[a];for(var b=e(a),c=a.getFullYear();--c>=1970;)b+=d(c);return f[a]=b,b}function d(a){return e(new Date(a,11,31))+1}function e(b){var c=a.time.dayOfYear(b),d=c/7|0,e=(a.time.year(b).getDay()+6)%7,f=e+c-7*d;return Math.max(0,c-2*d-(5>=e&&f>=5||12>=e&&f>=12)-(6>=e&&f>=6||13>=e&&f>=13))}var f={},g={};c.invert=function(a){if(a in g)return g[a];for(var b,c,e=1970;(b=d(e))<=a;)++e,a-=b;var f=a%5,h=(new Date(e,0,1).getDay()+6)%7;return h+f>4&&(f+=2),c=new Date(e,0,7*(a/5|0)+f+1),g[a]=c,c},b.utilities.weekday=c}(d3,sl),function(a,b){"use strict";b.indicators.bollingerBands=function(){var b=a.time.scale(),c=a.scale.linear(),d=0,e=20,f=2,g="bollingerBandArea",h="bollingerBandUpper",i="bollingerBandLower",j="bollingerAverage",k=function(k){var l=a.svg.area(),m=a.svg.line(),n=a.svg.line(),o=a.svg.line();l.x(function(a){return b(a.date)}),m.x(function(a){return b(a.date)}),n.x(function(a){return b(a.date)}),o.x(function(a){return b(a.date)});var p=function(a,b){if(0===e)return a[b][d];for(var c=Math.min(e,b+1),f=b+1-c,g=0,h=f;b>=h;++h){var i=a[h][d];g+=i}return g/c},q=function(a,b,c){if(0===e)return 0;for(var f=Math.min(e,b+1),g=b+1-f,h=0,i=g;b>=i;++i){var j=a[i][d],k=j-c;h+=k*k}var l=h/f;return Math.sqrt(l)};k.each(function(b){for(var d={},k=0;k<b.length;++k){var r=b[k].date,s=p(b,k),t=q(b,k,s);d[r]={avg:s,sd:t}}l.y0(function(a){var b=d[a.date].avg,e=d[a.date].sd;return c(b+e*f)}),l.y1(function(a){var b=d[a.date].avg,e=d[a.date].sd;return c(b-e*f)}),m.y(function(a){var b=d[a.date].avg,e=d[a.date].sd;return c(b+e*f)}),n.y(function(a){var b=d[a.date].avg,e=d[a.date].sd;return c(b-e*f)}),o.y(function(a){var b=d[a.date].avg;return c(b)});for(var u=[],k=e;k<b.length;++k)u.push(b[k]);var v=a.select(this).selectAll(".area").data([u]),w=a.select(this).selectAll(".upper").data([u]),x=a.select(this).selectAll(".lower").data([u]),y=a.select(this).selectAll(".average").data([u]);v.enter().append("path"),w.enter().append("path"),x.enter().append("path"),y.enter().append("path"),v.attr("d",l).classed("area",!0).classed(g,!0),w.attr("d",m).classed("upper",!0).classed(h,!0),x.attr("d",n).classed("lower",!0).classed(i,!0),y.attr("d",o).classed("average",!0).classed(j,!0),v.exit().remove(),w.exit().remove(),x.exit().remove(),y.exit().remove()})};return k.xScale=function(a){return arguments.length?(b=a,k):b},k.yScale=function(a){return arguments.length?(c=a,k):c},k.yValue=function(a){return arguments.length?(d=a,k):d},k.movingAverage=function(a){return arguments.length?(a>=0&&(e=a),k):e},k.standardDeviations=function(a){return arguments.length?(a>=0&&(f=a),k):f},k.cssBandUpper=function(a){return arguments.length?(h=a,k):h},k.cssBandLower=function(a){return arguments.length?(i=a,k):i},k.cssBandArea=function(a){return arguments.length?(g=a,k):g},k.cssAverage=function(a){return arguments.length?(j=a,k):j},k}}(d3,sl),function(a,b){"use strict";b.indicators.movingAverage=function(){var b=a.time.scale(),c=a.scale.linear(),d=0,e="",f=0,g="",h=function(e){var h=a.svg.line();h.x(function(a){return b(a.date)}),e.each(function(b){h.y(isNaN(parseFloat(d))?0===f?function(a){return c(a[d])}:function(a,e){for(var g=Math.min(f,e+1),h=e+1-g,i=0,j=h;e>=j;++j)i+=b[j][d];var k=i/g;return c(k)}:c(d));var e=a.select(this).selectAll(".indicator").data([b]);e.enter().append("path"),e.attr("d",h).classed("indicator",!0).classed(g,!0),e.exit().remove()})};return h.xScale=function(a){return arguments.length?(b=a,h):b},h.yScale=function(a){return arguments.length?(c=a,h):c},h.yValue=function(a){return arguments.length?(d=a,h):d},h.yLabel=function(a){return arguments.length?(e=a,h):e},h.averagePoints=function(a){return arguments.length?(a>=0&&(f=a),h):f},h.css=function(a){return arguments.length?(g=a,h):g},h}}(d3,sl),function(a,b){"use strict";b.indicators.rsi=function(){var b=a.time.scale(),c=a.scale.linear(),d=14,e=70,f=30,g=1,h="",i=null,j=null,k=null,l=function(l){l.selectAll(".marker").remove(),i=l.append("line").attr("class","marker upper").attr("x1",b.range()[0]).attr("y1",c(e)).attr("x2",b.range()[1]).attr("y2",c(e)),j=l.append("line").attr("class","marker centre").attr("x1",b.range()[0]).attr("y1",c(50)).attr("x2",b.range()[1]).attr("y2",c(50)),k=l.append("line").attr("class","marker lower").attr("x1",b.range()[0]).attr("y1",c(f)).attr("x2",b.range()[1]).attr("y2",c(f));var m=a.svg.line();m.x(function(a){return b(a.date)}),l.each(function(b){m.y(0===d?function(){return c(0)}:function(e,f){var h=f-d,i=f,j=[],k=[];1>h&&(h=1);for(var l=i;l>=h;l--){var m=b[l],n=b[l-1],o=Math.pow(g,l);j.push(m.close>n.close?(m.close-n.close)*o:0),k.push(m.close<n.close?(n.close-m.close)*o:0)}if(j.length<=0||k.length<=0)return c(0);var p=100-100/(1+a.mean(j)/a.mean(k));return c(p)});var e=a.select(this).selectAll(".rsi").data([b]);e.enter().append("path"),e.attr("d",m).classed("rsi",!0).classed(h,!0),e.exit().remove()})};return l.xScale=function(a){return arguments.length?(b=a,l):b},l.yScale=function(a){return arguments.length?(c=a,l):c},l.samplePeriods=function(a){return arguments.length?(d=0>a?0:a,l):d},l.upperMarker=function(a){return arguments.length?(e=a>100?100:0>a?0:a,l):e},l.lowerMarker=function(a){return arguments.length?(f=a>100?100:0>a?0:a,l):f},l.lambda=function(a){return arguments.length?(g=a>1?1:0>a?0:a,l):g},l.css=function(a){return arguments.length?(h=a,l):h},l}}(d3,sl),function(a,b){"use strict";function c(b){function e(a){return b("number"==typeof a?a:d(a))}return arguments.length||(b=a.scale.linear()),e.copy=function(){return c(b.copy())},e.domain=function(a){return arguments.length?(b.domain("number"==typeof a[0]?a:a.map(d)),e):b.domain().map(d.invert)},e.ticks=function(a){return arguments.length?b.ticks(a):b.ticks()},e.tickFormat=function(){return function(b){var c=d.invert(b);return a.time.format("%b %e")(c)}},e.invert=function(a){return d.invert(b.invert(a))},a.rebind(e,b,"range","rangeRound","interpolate","clamp","nice")}var d=b.utilities.weekday;b.scale.finance=function(){return c()}}(d3,sl),function(a,b){"use strict";b.scale.gridlines=function(){var b=a.time.scale(),c=a.scale.linear(),d=10,e=10,f=function(a,d){var e=d.selectAll(".x").data(a);e.enter().append("line").attr({"class":"x",x1:function(a){return b(a)},x2:function(a){return b(a)},y1:c.range()[0],y2:c.range()[1]}),e.attr({x1:function(a){return b(a)},x2:function(a){return b(a)},y1:c.range()[0],y2:c.range()[1]}),e.exit().remove()},g=function(a,d){var e=d.selectAll(".y").data(a);e.enter().append("line").attr({"class":"y",x1:b.range()[0],x2:b.range()[1],y1:function(a){return c(a)},y2:function(a){return c(a)}}),e.attr({x1:b.range()[0],x2:b.range()[1],y1:function(a){return c(a)},y2:function(a){return c(a)}}),e.exit().remove()},h=function(h){var i,j,k;h.each(function(){j=b.ticks(d),k=c.ticks(e),i=a.select(this).selectAll(".gridlines").data([[j,k]]),i.enter().append("g").classed("gridlines",!0),f(j,i),g(k,i)})};return h.xScale=function(a){return arguments.length?(b=a,h):b},h.yScale=function(a){return arguments.length?(c=a,h):c},h.xTicks=function(a){return arguments.length?(d=a,h):d},h.yTicks=function(a){return arguments.length?(e=a,h):e},h}}(d3,sl),function(a,b){"use strict";b.series.candlestick=function(){var b=a.time.scale(),c=a.scale.linear(),d=5,e=function(a){return a.close>a.open},f=function(a){return!e(a)},g=a.svg.line().x(function(a){return a.x}).y(function(a){return a.y}),h=function(a){var d=a.selectAll(".high-low-line").data(function(a){return[a]});d.enter().append("path"),d.classed("high-low-line",!0).attr("d",function(a){return g([{x:b(a.date),y:c(a.high)},{x:b(a.date),y:c(a.low)}])})},i=function(a){var f;f=a.selectAll("rect").data(function(a){return[a]}),f.enter().append("rect"),f.attr("x",function(a){return b(a.date)-d}).attr("y",function(a){return c(e(a)?a.close:a.open)}).attr("width",2*d).attr("height",function(a){return e(a)?c(a.open)-c(a.close):c(a.close)-c(a.open)})},j=function(b){var c,d;b.each(function(b){c=a.select(this).selectAll(".candlestick-series").data([b]),c.enter().append("g").classed("candlestick-series",!0),d=c.selectAll(".bar").data(b,function(a){return a.date}),d.enter().append("g").classed("bar",!0),d.classed({"up-day":e,"down-day":f}),h(d),i(d),d.exit().remove()})};return j.xScale=function(a){return arguments.length?(b=a,j):b},j.yScale=function(a){return arguments.length?(c=a,j):c},j.rectangleWidth=function(a){return arguments.length?(d=a,j):d},j}}(d3,sl),function(a,b,c){"use strict";b.series.comparison=function(){var b,d,e=a.time.scale(),f=a.scale.linear(),g=function(b,c){var d=a.bisector(function(a){return a.date}).left,e=d(b,c);return e||(e+=1),e},h=function(a,b){var c=g(a,b)-1,d=a[c].close;return a.map(function(a){return{date:a.date,change:a.close/d-1}})},i=function(a,b){var c=g(a,b)-1,d=a[c].change;return a.map(function(a){return{date:a.date,change:a.change-d}})},j=function(b,c){var d,e;b=b.map(function(a){return a=a.data,d=g(a,c[0])-1,e=g(a,c[1])+1,a.slice(d,e)});var f=b.reduce(function(a,b){return a.concat(b)},[]);return f.length?a.extent(f,function(a){return a.change}):[0,0]},k=a.scale.category10(),l=a.svg.line().interpolate("linear").x(function(a){return e(a.date)}).y(function(a){return f(a.change)}),m=function(c){var g,i;c.each(function(c){c=c.map(function(a){return{name:a.name,data:h(a.data,e.domain()[0])}}),b=c,k.domain(c.map(function(a){return a.name})),f.domain(j(c,e.domain())),d=f.copy(),g=a.select(this).selectAll(".comparison-series").data([c]),g.enter().append("g").classed("comparison-series",!0),i=g.selectAll(".line").data(c,function(a){return a.name}).enter().append("path").attr("class","line").attr("d",function(a){return l(a.data)}).style("stroke",function(a){return k(a.name)}),g.selectAll(".line").attr("d",function(a){return l(a.data)})})};return m.geometricZoom=function(a,h,k){var l,m,n=function(a){var b=d(0)-d(a);return b*=m.scale,b+=m.translate,"translate("+h+","+b+") scale("+k+","+m.scale+")"},o=b.map(function(a){return{name:a.name,data:i(a.data,e.domain()[0])}});f.domain(j(o,e.domain())),m=c(d,f),b=b.map(function(a){return l=g(a.data,e.domain()[0])-1,{name:a.name,data:a.data,transform:n(a.data[l].change)}}),a.selectAll(".line").data(b).attr("transform",function(a){return a.transform})},m.xScale=function(a){return arguments.length?(e=a,m):e},m.yScale=function(a){return arguments.length?(f=a,m):f},m}}(d3,sl),function(a,b){"use strict";b.series.ohlc=function(){var b=a.time.scale(),c=a.scale.linear(),d=function(a){return a.close>a.open},e=function(a){return!d(a)},f=5,g=a.svg.line().x(function(a){return a.x}).y(function(a){return a.y}),h=function(a){var d=a.selectAll(".high-low-line").data(function(a){return[a]});d.enter().append("path"),d.classed("high-low-line",!0).attr("d",function(a){return g([{x:b(a.date),y:c(a.high)},{x:b(a.date),y:c(a.low)}])})},i=function(a){var d,e;d=a.selectAll(".open-tick").data(function(a){return[a]}),e=a.selectAll(".close-tick").data(function(a){return[a]}),d.enter().append("path"),e.enter().append("path"),d.classed("open-tick",!0).attr("d",function(a){return g([{x:b(a.date)-f,y:c(a.open)},{x:b(a.date),y:c(a.open)}])}),e.classed("close-tick",!0).attr("d",function(a){return g([{x:b(a.date),y:c(a.close)},{x:b(a.date)+f,y:c(a.close)}])}),d.exit().remove(),e.exit().remove()},j=function(b){var c,f;b.each(function(b){c=a.select(this).selectAll(".ohlc-series").data([b]),c.enter().append("g").classed("ohlc-series",!0),f=c.selectAll(".bar").data(b,function(a){return a.date}),f.enter().append("g").classed("bar",!0),f.classed({"up-day":d,"down-day":e}),h(f),i(f),f.exit().remove()})};return j.xScale=function(a){return arguments.length?(b=a,j):b},j.yScale=function(a){return arguments.length?(c=a,j):c},j.tickWidth=function(a){return arguments.length?(f=a,j):f},j}}(d3,sl),function(a,b){"use strict";b.series.volume=function(){var b=a.time.scale(),c=a.scale.linear(),d=5,e=function(a){return a.close>a.open},f=function(a){return!e(a)},g=function(a){var e;e=a.selectAll("rect").data(function(a){return[a]}),e.enter().append("rect"),e.attr("x",function(a){return b(a.date)-d}).attr("y",function(a){return c(a.volume)}).attr("width",2*d).attr("height",function(a){return c(0)-c(a.volume)})},h=function(b){var c,d;b.each(function(b){c=a.select(this).selectAll(".volume-series").data([b]),c.enter().append("g").classed("volume-series",!0),d=c.selectAll(".volumebar").data(b,function(a){return a.date}),d.enter().append("g").classed("volumebar",!0),d.classed({"up-day":e,"down-day":f}),g(d),d.exit().remove()})};return h.xScale=function(a){return arguments.length?(b=a,h):b},h.yScale=function(a){return arguments.length?(c=a,h):c},h.barWidth=function(a){return arguments.length?(d=a,h):d},h}}(d3,sl),function(a,b){"use strict";b.tools.annotation=function(){var b=0,c=a.time.scale(),d=a.scale.linear(),e="",f=0,g=2,h=function(a){return a},i=null,j=null,k=null,l=function(a){i=a.append("g").attr("id","annotation_"+b).attr("class","annotation"),j=i.append("line").attr("class","marker").attr("x1",c.range()[0]).attr("y1",d(f)).attr("x2",c.range()[1]).attr("y2",d(f)),k=i.append("text").attr("class","callout").attr("x",c.range()[1]-g).attr("y",d(f)-g).attr("style","text-anchor: end;").text(e+" : "+h(f))};return l.index=function(a){return arguments.length?(b=a,l):b},l.xScale=function(a){return arguments.length?(c=a,l):c},l.yScale=function(a){return arguments.length?(d=a,l):d},l.yValue=function(a){return arguments.length?(f=a,l):f},l.yLabel=function(a){return arguments.length?(e=a,l):e},l.padding=function(a){return arguments.length?(g=a,l):g},l.formatCallout=function(a){return arguments.length?(h=a,l):h},l}}(d3,sl),function(a,b){"use strict";b.tools.crosshairs=function(){function b(){o&&y.update()}function c(){o&&y.clear()}function d(){p&&y.active(!o)}function e(a){var b=null,c=Number.MAX_VALUE;return i.forEach(function(d){var e=Math.abs(a.getTime()-d.date.getTime());c>e&&(c=e,b=d)}),b}function f(a,b){var c=null,d=Number.MAX_VALUE;for(var e in b)if(b.hasOwnProperty(e)&&"date"!==e){var f=Math.abs(a-b[e]);d>=f&&(d=f,c=e)}return c}function g(){var a=j(w.date),b=k(w[x]);r.attr("y1",b).attr("y2",b),s.attr("x1",a).attr("x2",a),t.attr("cx",a).attr("cy",b),u.attr("y",b-q).text(m(w[x],x)),v.attr("x",a-q).text(n(w.date)),r.attr("display","inherit"),s.attr("display","inherit"),t.attr("display","inherit"),u.attr("display","inherit"),v.attr("display","inherit")}var h=null,i=null,j=a.time.scale(),k=a.scale.linear(),l=null,m=null,n=null,o=!0,p=!0,q=2,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=function(){var a=h.append("g").attr("class","crosshairs");r=a.append("line").attr("class","crosshairs horizontal").attr("x1",j.range()[0]).attr("x2",j.range()[1]).attr("display","none"),s=a.append("line").attr("class","crosshairs vertical").attr("y1",k.range()[0]).attr("y2",k.range()[1]).attr("display","none"),t=a.append("circle").attr("class","crosshairs circle").attr("r",6).attr("display","none"),u=a.append("text").attr("class","crosshairs callout horizontal").attr("x",j.range()[1]-q).attr("style","text-anchor: end").attr("display","none"),v=a.append("text").attr("class","crosshairs callout vertical").attr("y","1em").attr("style","text-anchor: end").attr("display","none")};return y.update=function(){if(o){var b=a.mouse(h[0][0]),c=j.invert(b[0]),d=k.invert(b[1]),i=e(c);if(null!==i){var m=null;m=i[l]?l:f(d,i),(i!==w||m!==x)&&(w=i,x=m,g())}}else g()},y.clear=function(){w=null,x=null,r.attr("display","none"),s.attr("display","none"),t.attr("display","none"),u.attr("display","none"),v.attr("display","none")},y.target=function(a){return arguments.length?(h&&(h.on("mousemove.crosshairs",null),h.on("mouseout.crosshairs",null),h.on("click.crosshairs",null)),h=a,h.on("mousemove.crosshairs",b),h.on("mouseout.crosshairs",c),h.on("click.crosshairs",d),y):h},y.series=function(a){return arguments.length?(i=a,y):i},y.xScale=function(a){return arguments.length?(j=a,y):j},y.yScale=function(a){return arguments.length?(k=a,y):k},y.yValue=function(a){return arguments.length?(l=a,y):l},y.formatH=function(a){return arguments.length?(m=a,y):m},y.formatV=function(a){return arguments.length?(n=a,y):n},y.active=function(a){return arguments.length?(o=a,r.classed("frozen",!o),s.classed("frozen",!o),t.classed("frozen",!o),y):o},y.freezable=function(a){return arguments.length?(p=a,y):p},y.padding=function(a){return arguments.length?(q=a,y):q},y.highlightedField=function(){return x},y}}(d3,sl),function(a,b){"use strict";b.tools.fibonacciFan=function(){function b(){if(o)switch(w){case 1:x=d(),x&&(z.update(),p.attr("display","inherit"));break;case 2:y=d(),y&&(z.update(),q.attr("display","inherit"),r.attr("display","inherit"));break;case 3:}}function c(){if(o)switch(w){case 1:w=2;break;case 2:g(),w=3;break;case 3:h(),w=1}}function d(){var b=a.mouse(k[0][0]),c=m.invert(b[0]),d=n.invert(b[1]),g=e(c);if(null!==g){var h=f(d,g);if(null!==h)return{point:g,field:h}}return null}function e(a){var b=null,c=Number.MAX_VALUE;return l.forEach(function(d){var e=Math.abs(a.getTime()-d.date.getTime());c>e&&(c=e,b=d)}),b}function f(a,b){var c=null,d=Number.MAX_VALUE;for(var e in b)if(b.hasOwnProperty(e)&&"date"!==e){var f=Math.abs(a-b[e]);d>=f&&(d=f,c=e)}return c}function g(){if(m(x.point.date)>m(y.point.date)){var a=x;x=y,y=a}var b=m(x.point.date),c=n(x.point[x.field]),d=m(y.point.date),e=n(y.point[y.field]),f=m.range()[1],g=i(b,c,d,e,f);if(g){j(b,c,f,g.source,g.source,g.source),s.attr("display","inherit"),t.attr("display","inherit"),u.attr("display","inherit"),v.attr("display","inherit");var h=b+","+c+" "+f+","+g.a+" "+f+","+g.c;s.transition().attr("y2",g.a),t.transition().attr("y2",g.b),u.transition().attr("y2",g.c),v.transition().attr("points",h)}p.attr("display","none"),q.attr("display","none")}function h(){x=null,y=null,p.attr("display","none"),q.attr("display","none"),r.attr("display","none"),s.attr("display","none"),t.attr("display","none"),u.attr("display","none"),v.attr("display","none")}function i(a,b,c,d,e){if(a===c)return null;var f=(d-b)/(c-a),g=f*(e-a)+b,h=.618*f*(e-a)+b,i=.5*f*(e-a)+b,j=.382*f*(e-a)+b;return{source:g,a:h,b:i,c:j}}function j(a,b,c,d,e,f){var g=a+","+b+" "+c+","+d+" "+c+","+f;s.attr("x1",a).attr("y1",b).attr("x2",c).attr("y2",d),t.attr("x1",a).attr("y1",b).attr("x2",c).attr("y2",e),u.attr("x1",a).attr("y1",b).attr("x2",c).attr("y2",f),v.attr("points",g)}var k=null,l=null,m=a.time.scale(),n=a.scale.linear(),o=!0,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=1,x=null,y=null,z=function(){var a=k.append("g").attr("class","fibonacci-fan");p=a.append("circle").attr("class","fibonacci-fan origin").attr("r",6).attr("display","none"),q=a.append("circle").attr("class","fibonacci-fan target").attr("r",6).attr("display","none"),r=a.append("line").attr("class","fibonacci-fan source").attr("display","none"),s=a.append("line").attr("class","fibonacci-fan a").attr("display","none"),t=a.append("line").attr("class","fibonacci-fan b").attr("display","none"),u=a.append("line").attr("class","fibonacci-fan c").attr("display","none"),v=a.append("polygon").attr("class","fibonacci-fan area").attr("display","none")};return z.update=function(){if(x){var a=m(x.point.date),b=n(x.point[x.field]);if(p.attr("cx",a).attr("cy",b),r.attr("x1",a).attr("y1",b),y&&1!==w){var c=m(y.point.date),d=n(y.point[y.field]);if(q.attr("cx",c).attr("cy",d),r.attr("x2",c).attr("y2",d),3===w){var e=m.range()[1],f=i(a,b,c,d,e);f&&j(a,b,e,f.a,f.b,f.c)}}}},z.visible=function(a){if(a)switch(w){case 1:p.attr("display","inherit");break;case 2:p.attr("display","inherit"),q.attr("display","inherit"),r.attr("display","inherit");break;case 3:r.attr("display","inherit"),s.attr("display","inherit"),t.attr("display","inherit"),u.attr("display","inherit"),v.attr("display","inherit")}else p.attr("display","none"),q.attr("display","none"),r.attr("display","none"),s.attr("display","none"),t.attr("display","none"),u.attr("display","none"),v.attr("display","none")},z.target=function(a){return arguments.length?(k&&(k.on("mousemove.fibonacci-fan",null),k.on("click.fibonacci-fan",null)),k=a,k.on("mousemove.fibonacci-fan",b),k.on("click.fibonacci-fan",c),z):k},z.series=function(a){return arguments.length?(l=a,z):l},z.xScale=function(a){return arguments.length?(m=a,z):m},z.yScale=function(a){return arguments.length?(n=a,z):n},z.active=function(a){return arguments.length?(o=a,z):o},z}}(d3,sl),function(a,b){"use strict";b.tools.measure=function(){function b(){if(m)switch(x){case 1:y=d(),y&&(A.update(),q.attr("display","inherit"));break;case 2:z=d(),z&&(A.update(),r.attr("display","inherit"),s.attr("display","inherit"));break;case 3:}}function c(){if(m)switch(x){case 1:x=2;break;case 2:g(),x=3;break;case 3:h(),x=1}}function d(){var b=a.mouse(i[0][0]),c=k.invert(b[0]),d=l.invert(b[1]),g=e(c);if(null!==g){var h=f(d,g);if(null!==h)return{point:g,field:h}}return null}function e(a){var b=null,c=Number.MAX_VALUE;return j.forEach(function(d){var e=Math.abs(a.getTime()-d.date.getTime());c>e&&(c=e,b=d)}),b}function f(a,b){var c=null,d=Number.MAX_VALUE;for(var e in b)if(b.hasOwnProperty(e)&&"date"!==e){var f=Math.abs(a-b[e]);d>=f&&(d=f,c=e)}return c}function g(){var a=k(y.point.date),b=l(y.point[y.field]),c=k(z.point.date),d=l(z.point[z.field]);t.attr("x1",a).attr("y1",b).attr("x2",c).attr("y2",b),u.attr("x1",c).attr("y1",b).attr("x2",c).attr("y2",d),v.attr("x",c-n).attr("y",b-(b-d)/2).text(p(Math.abs(z.point[z.field]-y.point[y.field]))),w.attr("y",b-n).attr("x",a+(c-a)/2).text(o(Math.abs(z.point.date.getTime()-y.point.date.getTime()))),t.attr("display","inherit"),u.attr("display","inherit"),v.attr("display","inherit"),w.attr("display","inherit"),q.attr("display","none"),r.attr("display","none")}function h(){y=null,z=null,q.attr("display","none"),r.attr("display","none"),s.attr("display","none"),t.attr("display","none"),u.attr("display","none"),v.attr("display","none"),w.attr("display","none")}var i=null,j=null,k=a.time.scale(),l=a.scale.linear(),m=!0,n=2,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=1,y=null,z=null,A=function(){var a=i.append("g").attr("class","measure");q=a.append("circle").attr("class","measure origin").attr("r",6).attr("display","none"),r=a.append("circle").attr("class","measure target").attr("r",6).attr("display","none"),s=a.append("line").attr("class","measure source").attr("display","none"),t=a.append("line").attr("class","measure x").attr("display","none"),u=a.append("line").attr("class","measure y").attr("display","none"),v=a.append("text").attr("class","measure callout horizontal").attr("style","text-anchor: end").attr("display","none"),w=a.append("text").attr("class","measure callout vertical").attr("style","text-anchor: middle").attr("display","none")};return A.update=function(){if(y){var a=k(y.point.date),b=l(y.point[y.field]);if(q.attr("cx",a).attr("cy",b),s.attr("x1",a).attr("y1",b),z&&1!==x){var c=k(z.point.date),d=l(z.point[z.field]);r.attr("cx",c).attr("cy",d),s.attr("x2",c).attr("y2",d),3===x&&g()}}},A.visible=function(a){if(a)switch(x){case 1:q.attr("display","inherit");break;case 2:q.attr("display","inherit"),r.attr("display","inherit"),s.attr("display","inherit");break;case 3:s.attr("display","inherit"),t.attr("display","inherit"),u.attr("display","inherit"),v.attr("display","inherit"),w.attr("display","inherit")}else q.attr("display","none"),r.attr("display","none"),s.attr("display","none"),t.attr("display","none"),u.attr("display","none"),v.attr("display","none"),w.attr("display","none")},A.target=function(a){return arguments.length?(i&&(i.on("mousemove.measure",null),i.on("click.measure",null)),i=a,i.on("mousemove.measure",b),i.on("click.measure",c),A):i},A.series=function(a){return arguments.length?(j=a,A):j},A.xScale=function(a){return arguments.length?(k=a,A):k},A.yScale=function(a){return arguments.length?(l=a,A):l},A.active=function(a){return arguments.length?(m=a,A):m},A.padding=function(a){return arguments.length?(n=a,A):n},A.formatH=function(a){return arguments.length?(o=a,A):o},A.formatV=function(a){return arguments.length?(p=a,A):p},A}}(d3,sl),function(a,b){"use strict";b.utilities.chartLayout=function(){var b={top:20,right:20,bottom:20,left:20},c=0,d=0,e=!0,f=!0,g=function(h){h.each(function(){var h=a.select(this);e===!0&&(c=parseInt(getComputedStyle(this).width),g.innerWidth()<1&&(c=800+b.left+b.right)),f===!0&&(d=parseInt(getComputedStyle(this).height),g.innerHeight()<1&&(d=400+b.top+b.bottom));var i=h.append("svg").attr("width",c).attr("height",d),j=i.append("g").attr("transform","translate("+b.left+","+b.top+")");j.append("defs").append("clipPath").attr("id","plotAreaClip").append("rect").attr({width:g.innerWidth(),height:g.innerHeight()}),j.append("g").attr("clip-path","url(#plotAreaClip)").attr("class","plotArea")})};return g.marginTop=function(a){return arguments.length?(b.top=a,g):b.top},g.marginRight=function(a){return arguments.length?(b.right=a,g):b.right},g.marginBottom=function(a){return arguments.length?(b.bottom=a,g):b.bottom},g.marginLeft=function(a){return arguments.length?(b.left=a,g):b.left},g.width=function(a){return arguments.length?(c=a,e=!1,g):c},g.height=function(a){return arguments.length?(d=a,f=!1,g):d},g.innerWidth=function(){var a=c-b.left-b.right;return a},g.innerHeight=function(){var a=d-b.top-b.bottom;return a},g}}(d3,sl),function(a,b,c){"use strict";a.utilities.dataGenerator=function(){var a=.1,d=.1,e=100,f=1e5,g=50,h=.3,i=new Date,j=new Date,k=function(a){return!(0===a.day()||6===a.day())},l=function(b,c){var f,g=n(b,c,a,d),h=[];for(h[0]=e,f=1;f<g.length;f+=1)h[f]=h[f-1]*g[f];return h},m=function(a,b){var c,d=n(a,b,0,1),e=[];for(h=Math.max(0,Math.min(h,1)),e[0]=f,c=1;c<d.length;c+=1)e[c]=e[c-1]*d[c];return e=e.map(function(a){return Math.floor(a*(1-h+Math.random()*h*2))})},n=function(a,b,d,e){var f=a/b,g=Math.sqrt(f),h=c().randn(1,b).multiply(g),i=h.multiply(e).add((d-e*e/2)*f),j=i.map(function(a){return Math.exp(a)});return c.row(j,0)},o=function(){var a,c,d,e=b().range(j,i),f=315569e5,h=e/f,n=0,o=[],p=0,q=0;return e.by("days",function(a){(!k||k(a))&&(n+=1)}),a=l(h,n*g),c=m(h,n),e.by("days",function(b){(!k||k(b))&&(d=a.slice(q,q+g),o.push({date:b.toDate(),open:d[0],high:Math.max.apply({},d),low:Math.min.apply({},d),close:d[g-1],volume:c[p]}),q+=g,p+=1)}),o},p=function(){};return p.generate=function(){return o()},p.mu=function(b){return arguments.length?(a=b,p):a},p.sigma=function(a){return arguments.length?(d=a,p):d},p.startingPrice=function(a){return arguments.length?(e=a,p):e},p.startingVolume=function(a){return arguments.length?(f=a,p):f},p.intraDaySteps=function(a){return arguments.length?(g=a,p):g},p.volumeNoiseFactor=function(a){return arguments.length?(h=a,p):h},p.filter=function(a){return arguments.length?(k=a,p):k},p.toDate=function(a){return arguments.length?(i=a,p):i},p.fromDate=function(a){return arguments.length?(j=a,p):j},p}}(sl,moment,jStat);
//# sourceMappingURL=d3-financial-components.min.js.map